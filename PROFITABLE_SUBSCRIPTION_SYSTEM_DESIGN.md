# ç›ˆåˆ©è®¢é˜…ç³»ç»Ÿè®¾è®¡

## é¡¹ç›®ç°çŠ¶åˆ†æ

### ç°æœ‰ç”Ÿæˆå™¨ç³»ç»Ÿ
1. **Emoji Generator** - è¡¨æƒ…åŒ…ç”Ÿæˆå™¨
2. **Lovart Style** - AIè®¾è®¡ä»£ç†
3. **Realtime Translation** - å®æ—¶ç¿»è¯‘
4. **TikTok Emojis** - TikTokè¡¨æƒ…åŒ…
5. **Gen Z Guide** - å†…å®¹å±•ç¤ºé¡µé¢

### æˆæœ¬åˆ†æ
- **Emoji Generator**: ä¸­ç­‰æˆæœ¬ (GPT-4 + DALL-E)
- **Lovart Style**: é«˜æˆæœ¬ (GPT-4 + å¤šå¼ DALL-Eå›¾ç‰‡)
- **Realtime Translation**: ä½æˆæœ¬ (GPT-3.5)
- **TikTok Emojis**: æ— æˆæœ¬ (é™æ€å†…å®¹)

## å®Œå–„çš„ç›ˆåˆ©è®¢é˜…ç³»ç»Ÿè®¾è®¡

### 1. ç”¨æˆ·ç­‰çº§ç³»ç»Ÿ

#### ğŸ†“ **å…è´¹ç”¨æˆ· (Free)**
- **æ¯æ—¥å…è´¹æ¬¡æ•°**: 5æ¬¡
- **åŠŸèƒ½é™åˆ¶**:
  - Emoji Generator: 2æ¬¡/å¤©
  - Lovart Style: 1æ¬¡/å¤©
  - Realtime Translation: 2æ¬¡/å¤©
- **å¹¿å‘Š**: æœ‰
- **å¯¼å‡ºè´¨é‡**: æ ‡å‡†
- **å®¢æœæ”¯æŒ**: ç¤¾åŒºæ”¯æŒ

#### ğŸš€ **å…¥é—¨ç”¨æˆ· (Starter) - $9.99/æœˆ**
- **æ¯æ—¥å…è´¹æ¬¡æ•°**: 20æ¬¡
- **åŠŸèƒ½é™åˆ¶**:
  - Emoji Generator: 10æ¬¡/å¤©
  - Lovart Style: 5æ¬¡/å¤©
  - Realtime Translation: 5æ¬¡/å¤©
- **å¹¿å‘Š**: æ— 
- **å¯¼å‡ºè´¨é‡**: é«˜æ¸…
- **å®¢æœæ”¯æŒ**: é‚®ä»¶æ”¯æŒ
- **é¢å¤–åŠŸèƒ½**:
  - æ‰¹é‡ç”Ÿæˆ
  - è‡ªå®šä¹‰æ ·å¼
  - å†å²è®°å½•

#### â­ **ä¸“ä¸šç”¨æˆ· (Pro) - $19.99/æœˆ**
- **æ¯æ—¥å…è´¹æ¬¡æ•°**: 50æ¬¡
- **åŠŸèƒ½é™åˆ¶**:
  - Emoji Generator: 25æ¬¡/å¤©
  - Lovart Style: 15æ¬¡/å¤©
  - Realtime Translation: 10æ¬¡/å¤©
- **å¹¿å‘Š**: æ— 
- **å¯¼å‡ºè´¨é‡**: è¶…é«˜æ¸…
- **å®¢æœæ”¯æŒ**: ä¼˜å…ˆæ”¯æŒ
- **é¢å¤–åŠŸèƒ½**:
  - æ‰€æœ‰StarteråŠŸèƒ½
  - APIè®¿é—®
  - å›¢é˜Ÿåä½œ
  - é«˜çº§æ¨¡æ¿
  - å•†ä¸šä½¿ç”¨æˆæƒ

#### ğŸ¢ **ä¼ä¸šç”¨æˆ· (Enterprise) - $49.99/æœˆ**
- **æ¯æ—¥å…è´¹æ¬¡æ•°**: 200æ¬¡
- **åŠŸèƒ½é™åˆ¶**:
  - Emoji Generator: 100æ¬¡/å¤©
  - Lovart Style: 50æ¬¡/å¤©
  - Realtime Translation: 50æ¬¡/å¤©
- **å¹¿å‘Š**: æ— 
- **å¯¼å‡ºè´¨é‡**: æœ€é«˜è´¨é‡
- **å®¢æœæ”¯æŒ**: ä¸“å±å®¢æœ
- **é¢å¤–åŠŸèƒ½**:
  - æ‰€æœ‰ProåŠŸèƒ½
  - ç™½æ ‡è§£å†³æ–¹æ¡ˆ
  - è‡ªå®šä¹‰éƒ¨ç½²
  - æ•°æ®å¯¼å‡º
  - åŸ¹è®­æ”¯æŒ

### 2. ç§¯åˆ†ç³»ç»Ÿè®¾è®¡

#### ç§¯åˆ†è·å–æ–¹å¼
1. **æ¯æ—¥ç­¾åˆ°**: +1ç§¯åˆ†
2. **è¿ç»­ç­¾åˆ°**: ç¬¬7å¤© +5ç§¯åˆ†
3. **é‚€è¯·å¥½å‹**: +10ç§¯åˆ†/äºº
4. **è´­ä¹°ç§¯åˆ†åŒ…**: ç›´æ¥è´­ä¹°
5. **è®¢é˜…å¥–åŠ±**: æ¯æœˆèµ é€ç§¯åˆ†

#### ç§¯åˆ†æ¶ˆè´¹æ ‡å‡†
- **Emoji Generator**: 2ç§¯åˆ†/æ¬¡
- **Lovart Style**: 5ç§¯åˆ†/æ¬¡
- **Realtime Translation**: 1ç§¯åˆ†/æ¬¡

#### ç§¯åˆ†åŒ…å®šä»·
- **å°åŒ…**: 100ç§¯åˆ† = $4.99
- **ä¸­åŒ…**: 500ç§¯åˆ† = $19.99
- **å¤§åŒ…**: 1000ç§¯åˆ† = $34.99
- **è¶…å¤§åŒ…**: 2500ç§¯åˆ† = $79.99

### 3. æ•°æ®åº“æ¶æ„ä¼˜åŒ–

```prisma
model User {
  id            String   @id @default(cuid())
  name          String?
  email         String?  @unique
  username      String?  @unique
  passwordHash  String?
  
  // è®¢é˜…ä¿¡æ¯
  subscriptionPlan    String   @default("free") // free, starter, pro, enterprise
  subscriptionExpireAt DateTime?
  subscriptionStatus   String   @default("active") // active, cancelled, expired
  
  // ç§¯åˆ†ç³»ç»Ÿ
  credits            Int      @default(0)
  totalCreditsEarned Int      @default(0)
  totalCreditsSpent  Int      @default(0)
  
  // æ¯æ—¥ä½¿ç”¨é™åˆ¶
  dailyUsage         Json     @default("{}") // {emojiGenerator: 0, lovartStyle: 0, realtimeTranslation: 0}
  lastUsageReset     DateTime @default(now())
  
  // ç­¾åˆ°ç³»ç»Ÿ
  lastCheckIn        DateTime?
  consecutiveCheckIns Int      @default(0)
  
  // é‚€è¯·ç³»ç»Ÿ
  referralCode       String?  @unique
  referredBy         String?
  referralCount      Int      @default(0)
  
  // æ”¯ä»˜ä¿¡æ¯
  creemCustomerId    String?
  points             Int      @default(0)
  
  // æ—¶é—´æˆ³
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  
  // å…³è”
  accounts           Account[]
  sessions           Session[]
  posts              Post[]
  usageRecords       UsageRecord[]
  creditTransactions CreditTransaction[]
  checkIns           CheckIn[]
}

model UsageRecord {
  id          String   @id @default(cuid())
  userId      String
  serviceType String   // emojiGenerator, lovartStyle, realtimeTranslation
  creditsUsed Int
  cost        Float
  inputData   Json?    // å­˜å‚¨è¾“å…¥æ•°æ®
  outputData  Json?    // å­˜å‚¨è¾“å‡ºæ•°æ®
  createdAt   DateTime @default(now())
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model CreditTransaction {
  id          String   @id @default(cuid())
  userId      String
  type        String   // purchase, reward, bonus, refund
  amount      Int
  description String
  createdAt   DateTime @default(now())
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model CheckIn {
  id        String   @id @default(cuid())
  userId    String
  date      DateTime @default(now())
  creditsEarned Int  @default(1)
  
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}
```

### 4. ç›ˆåˆ©ç­–ç•¥

#### æ”¶å…¥æ¥æº
1. **è®¢é˜…æ”¶å…¥**: ä¸»è¦æ”¶å…¥æ¥æº
2. **ç§¯åˆ†åŒ…é”€å”®**: è¡¥å……æ”¶å…¥
3. **ä¼ä¸šå®šåˆ¶**: é«˜ä»·å€¼æœåŠ¡
4. **APIæœåŠ¡**: å¼€å‘è€…æ”¶å…¥

#### æˆæœ¬æ§åˆ¶
1. **æ™ºèƒ½è·¯ç”±**: æ ¹æ®ç”¨æˆ·ç­‰çº§é€‰æ‹©ä¸åŒæ¨¡å‹
2. **ç¼“å­˜æœºåˆ¶**: å‡å°‘é‡å¤è®¡ç®—
3. **æ‰¹é‡å¤„ç†**: æé«˜æ•ˆç‡
4. **CDNä¼˜åŒ–**: å‡å°‘å¸¦å®½æˆæœ¬

#### å®šä»·ç­–ç•¥
- **å…è´¹ç”¨æˆ·**: å¸å¼•ç”¨æˆ·ï¼Œå»ºç«‹ä¹ æƒ¯
- **å…¥é—¨ç”¨æˆ·**: ä½é—¨æ§›ï¼Œé«˜è½¬åŒ–
- **ä¸“ä¸šç”¨æˆ·**: æ ¸å¿ƒç”¨æˆ·ï¼Œä¸»è¦åˆ©æ¶¦
- **ä¼ä¸šç”¨æˆ·**: é«˜ä»·å€¼ï¼Œå®šåˆ¶æœåŠ¡

### 5. åŠŸèƒ½å®ç°ä¼˜å…ˆçº§

#### ç¬¬ä¸€é˜¶æ®µ (1-2å‘¨)
- [ ] ç”¨æˆ·ç­‰çº§ç³»ç»Ÿ
- [ ] æ¯æ—¥ä½¿ç”¨é™åˆ¶
- [ ] ç§¯åˆ†ç³»ç»ŸåŸºç¡€åŠŸèƒ½
- [ ] è®¢é˜…çŠ¶æ€æ£€æŸ¥

#### ç¬¬äºŒé˜¶æ®µ (2-3å‘¨)
- [ ] ç­¾åˆ°ç³»ç»Ÿ
- [ ] é‚€è¯·å¥–åŠ±
- [ ] ç§¯åˆ†åŒ…è´­ä¹°
- [ ] ä½¿ç”¨è®°å½•

#### ç¬¬ä¸‰é˜¶æ®µ (3-4å‘¨)
- [ ] é«˜çº§åŠŸèƒ½è§£é”
- [ ] APIè®¿é—®
- [ ] å›¢é˜Ÿåä½œ
- [ ] æ•°æ®åˆ†æ

### 6. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### å¼•å¯¼æµç¨‹
1. **å…è´¹è¯•ç”¨**: æ–°ç”¨æˆ·ç«‹å³ä½“éªŒ
2. **åŠŸèƒ½å¯¹æ¯”**: æ¸…æ™°å±•ç¤ºå„ç­‰çº§å·®å¼‚
3. **æ¸è¿›å‡çº§**: åœ¨é™åˆ¶æ—¶æç¤ºå‡çº§
4. **ä»·å€¼å±•ç¤º**: çªå‡ºä»˜è´¹åŠŸèƒ½ä»·å€¼

#### ç•™å­˜ç­–ç•¥
1. **æ¯æ—¥ç­¾åˆ°**: å»ºç«‹ä½¿ç”¨ä¹ æƒ¯
2. **æˆå°±ç³»ç»Ÿ**: æ¸¸æˆåŒ–ä½“éªŒ
3. **ç¤¾åŒºåŠŸèƒ½**: ç”¨æˆ·äº’åŠ¨
4. **å®šæœŸæ´»åŠ¨**: ä¿ƒé”€å’Œå¥–åŠ±

### 7. æŠ€æœ¯å®ç°è¦ç‚¹

#### ä¸­é—´ä»¶æ£€æŸ¥
```typescript
// æ£€æŸ¥ç”¨æˆ·æƒé™å’Œé™åˆ¶
export async function checkUserLimits(userId: string, serviceType: string) {
  const user = await prisma.user.findUnique({ where: { id: userId } });
  
  // æ£€æŸ¥è®¢é˜…çŠ¶æ€
  if (user.subscriptionExpireAt < new Date()) {
    return { allowed: false, reason: 'subscription_expired' };
  }
  
  // æ£€æŸ¥æ¯æ—¥é™åˆ¶
  const dailyUsage = user.dailyUsage as Record<string, number>;
  const limit = getDailyLimit(user.subscriptionPlan, serviceType);
  
  if (dailyUsage[serviceType] >= limit) {
    return { allowed: false, reason: 'daily_limit_reached' };
  }
  
  return { allowed: true };
}
```

#### ç§¯åˆ†ç³»ç»Ÿ
```typescript
// æ¶ˆè´¹ç§¯åˆ†
export async function spendCredits(userId: string, amount: number, reason: string) {
  const user = await prisma.user.findUnique({ where: { id: userId } });
  
  if (user.credits < amount) {
    throw new Error('Insufficient credits');
  }
  
  await prisma.$transaction([
    prisma.user.update({
      where: { id: userId },
      data: { 
        credits: { decrement: amount },
        totalCreditsSpent: { increment: amount }
      }
    }),
    prisma.creditTransaction.create({
      data: {
        userId,
        type: 'spend',
        amount: -amount,
        description: reason
      }
    })
  ]);
}
```

è¿™ä¸ªç³»ç»Ÿè®¾è®¡æ—¢ä¿è¯äº†ç›ˆåˆ©èƒ½åŠ›ï¼Œåˆæä¾›äº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œèƒ½å¤Ÿæœ‰æ•ˆå¸å¼•å’Œç•™å­˜ç”¨æˆ·ã€‚ 