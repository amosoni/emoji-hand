# ğŸ‰ **è®¢é˜…ç³»ç»Ÿå®ç°å®Œæˆæ€»ç»“**

## âœ… **å·²å®Œæˆçš„åŠŸèƒ½**

### **1. æ•°æ®åº“è®¾è®¡**
- âœ… æ›´æ–°äº†Prisma schema
- âœ… æ·»åŠ äº†æ–°çš„è®¢é˜…å­—æ®µ
- âœ… æ”¯æŒä½¿ç”¨é‡ç»Ÿè®¡
- âœ… ä¿æŒç§¯åˆ†ç³»ç»Ÿå…¼å®¹æ€§

### **2. åç«¯APIå®ç°**
- âœ… `emoji-pack-subscription.ts` - è®¢é˜…ç®¡ç†
- âœ… `usage-limits.ts` - ä½¿ç”¨é™åˆ¶æ£€æŸ¥
- âœ… `emoji-pack-credits.ts` - ç§¯åˆ†ç³»ç»Ÿ
- âœ… `/api/usage-limits/check` - å‰ç«¯ä½¿ç”¨é™åˆ¶æ£€æŸ¥
- âœ… `/api/usage-limits/record` - ä½¿ç”¨é‡è®°å½•

### **3. å‰ç«¯ç»„ä»¶**
- âœ… `UsageLimitDisplay.tsx` - ä½¿ç”¨é‡æ˜¾ç¤ºç»„ä»¶
- âœ… æ›´æ–°äº†`Translator.tsx` - é›†æˆç¿»è¯‘ä½¿ç”¨é™åˆ¶
- âœ… æ›´æ–°äº†`EmojiGenerator.tsx` - é›†æˆå›¾åƒç”Ÿæˆä½¿ç”¨é™åˆ¶
- âœ… åˆ›å»ºäº†`/subscription`é¡µé¢ - è®¢é˜…è®¡åˆ’å±•ç¤º

### **4. ç¿»è¯‘æ–‡ä»¶**
- âœ… æ›´æ–°äº†éŸ©è¯­ç¿»è¯‘æ–‡ä»¶
- âœ… åæ˜ æ–°çš„è®¢é˜…è®¡åˆ’è®¾è®¡

## ğŸ“Š **è®¢é˜…è®¡åˆ’è®¾è®¡**

| è®¡åˆ’ | ä»·æ ¼ | ç¿»è¯‘æ¬¡æ•° | å›¾åƒç”Ÿæˆ | æœˆæˆæœ¬ | åˆ©æ¶¦ç‡ |
|------|------|----------|----------|--------|--------|
| å…è´¹ | $0 | 8æ¬¡/æ—¥ | 0æ¬¡/æ—¥ | $0.24 | - |
| Starter | $9.99 | 15æ¬¡/æ—¥ | 2æ¬¡/æ—¥ | $6.9 | 31% |
| Pro | $19.99 | 35æ¬¡/æ—¥ | 5æ¬¡/æ—¥ | $16.5 | 17% |
| Enterprise | $39.99 | 70æ¬¡/æ—¥ | 10æ¬¡/æ—¥ | $33 | 17% |

## ğŸ”§ **ç³»ç»Ÿç‰¹æ€§**

### **1. ç»Ÿä¸€è®¡ç®—**
- æ‰€æœ‰ç¿»è¯‘é£æ ¼æˆæœ¬ä¸€æ ·
- æ‰€æœ‰å›¾åƒç”Ÿæˆæˆæœ¬ä¸€æ ·
- ç®€åŒ–ç”¨æˆ·ç†è§£

### **2. è‡ªåŠ¨é‡ç½®**
- æ¯æ—¥ä½¿ç”¨é‡è‡ªåŠ¨é‡ç½®
- åŸºäºç”¨æˆ·æ—¶åŒº

### **3. è®¢é˜…ä¼˜å…ˆ**
- æœ‰è®¢é˜…ç”¨è®¢é˜…é™åˆ¶
- æ— è®¢é˜…ç”¨ç§¯åˆ†ç³»ç»Ÿ
- è‡ªåŠ¨åˆ‡æ¢é€»è¾‘

### **4. æˆæœ¬é€æ˜**
- åŸºäºå®é™…AIæˆæœ¬å®šä»·
- åˆç†çš„åˆ©æ¶¦ç‡ä¿éšœ
- åŠ¨æ€ä½¿ç”¨é‡è°ƒæ•´

## ğŸ¯ **ç”¨æˆ·æµç¨‹**

### **å…è´¹ç”¨æˆ·**
```
è®¿é—® â†’ ä½“éªŒç¿»è¯‘ â†’ 8æ¬¡ç”¨å®Œ â†’ æç¤ºå‡çº§
```

### **ä»˜è´¹ç”¨æˆ·**
```
è®¢é˜… â†’ ä½¿ç”¨åŠŸèƒ½ â†’ æ¯æ—¥é™åˆ¶ â†’ æ¬¡æ—¥é‡ç½®
```

### **ç§¯åˆ†ç”¨æˆ·**
```
è´­ä¹°ç§¯åˆ† â†’ æ¶ˆè´¹ç§¯åˆ† â†’ ä½™é¢ä¸è¶³ â†’ å†æ¬¡è´­ä¹°
```

## ğŸš€ **æŠ€æœ¯å®ç°**

### **æ•°æ®åº“å­—æ®µ**
```prisma
model User {
  subscriptionPlan    String   @default("free")
  subscriptionExpireAt DateTime?
  translationUsesToday      Int @default(0)
  imageGenerationUsesToday Int @default(0)
  lastUsageReset           DateTime @default(now())
}
```

### **APIè·¯ç”±**
```typescript
// è®¢é˜…ç®¡ç†
api.emojiPackSubscription.getSubscriptionPlans()
api.emojiPackSubscription.getSubscription()
api.emojiPackSubscription.upgradeSubscription()

// ä½¿ç”¨é™åˆ¶
api.usageLimits.checkServiceLimit()
api.usageLimits.recordServiceUsage()
api.usageLimits.getUserUsageStats()

// ç§¯åˆ†ç³»ç»Ÿ
api.emojiPackCredits.getEmojiPackCredits()
api.emojiPackCredits.purchaseEmojiPackCredits()
api.emojiPackCredits.consumeEmojiPackCredits()
```

### **å‰ç«¯é›†æˆ**
```typescript
// ç¿»è¯‘é¡µé¢
const { data: usageStats } = api.usageLimits.getUserUsageStats.useQuery()
await api.usageLimits.recordServiceUsage.mutate({ service: 'translation' })

// å›¾åƒç”Ÿæˆé¡µé¢
const limitCheck = await fetch('/api/usage-limits/check', {
  method: 'POST',
  body: JSON.stringify({ service: 'imageGeneration' })
})
```

## ğŸ“ˆ **ä¼˜åŠ¿æ€»ç»“**

1. **ç®€å•æ˜äº†** - ç”¨æˆ·å®¹æ˜“ç†è§£
2. **æˆæœ¬é€æ˜** - åŸºäºå®é™…AIæˆæœ¬
3. **åˆ©æ¶¦ä¿éšœ** - åˆç†çš„åˆ©æ¶¦ç‡
4. **çµæ´»æ‰©å±•** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½
5. **ç”¨æˆ·å‹å¥½** - æ¸…æ™°çš„ä½¿ç”¨é™åˆ¶

## ğŸ”„ **ä¸‹ä¸€æ­¥å»ºè®®**

### **çŸ­æœŸç›®æ ‡**
- [ ] æ”¯ä»˜ç³»ç»Ÿé›†æˆ (Stripe/Creem)
- [ ] é‚®ä»¶é€šçŸ¥ç³»ç»Ÿ
- [ ] ç”¨æˆ·ç•Œé¢ä¼˜åŒ–
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•

### **ä¸­æœŸç›®æ ‡**
- [ ] ä½¿ç”¨ç»Ÿè®¡ä»ªè¡¨æ¿
- [ ] æ€§èƒ½ç›‘æ§
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

### **é•¿æœŸç›®æ ‡**
- [ ] å›¢é˜Ÿåä½œåŠŸèƒ½
- [ ] APIæ–‡æ¡£
- [ ] ç¬¬ä¸‰æ–¹é›†æˆ
- [ ] ä¼ä¸šåŠŸèƒ½

## ğŸ‰ **æ€»ç»“**

è¿™ä¸ªåŸºäºæˆæœ¬çš„è®¢é˜…ç³»ç»Ÿä¸ºä½ çš„å¤šç”Ÿæˆå™¨é¡¹ç›®æä¾›äº†å®Œæ•´ã€ç®€å•ã€æœ‰æ•ˆçš„ä½¿ç”¨é™åˆ¶å’Œè®¢é˜…ç®¡ç†è§£å†³æ–¹æ¡ˆï¼

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- âœ… åŸºäºå®é™…AIæˆæœ¬å®šä»·
- âœ… ç®€å•æ˜“æ‡‚çš„ç”¨æˆ·ç•Œé¢
- âœ… çµæ´»çš„è®¢é˜…å’Œç§¯åˆ†ç³»ç»Ÿ
- âœ… å®Œæ•´çš„å‰åç«¯é›†æˆ
- âœ… åˆç†çš„åˆ©æ¶¦ä¿éšœ

ç°åœ¨ä½ çš„é¡¹ç›®å·²ç»å…·å¤‡äº†å®Œæ•´çš„å•†ä¸šåŒ–åŸºç¡€ï¼ğŸš€ 